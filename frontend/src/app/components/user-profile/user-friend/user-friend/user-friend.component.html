<mat-card [ngClass]="{
    'are-friends': userFriend.areFriends === 'accepted', 
    'are-not-friends': userFriend.areFriends === 'pending' || userFriend.areFriends === 'rejected',
}">
    <mat-card-content class="friend-content">
        <ng-container
            *ngIf="this.profilePicture != null && this.profilePicture != undefined && this.profilePicture !== ''; then hasImage; else blankImage"></ng-container>
        <ng-template #hasImage>
            <div>
                <img src="{{this.profilePicture}}" class="image-cropper">
            </div>
        </ng-template>
        <ng-template #blankImage>
            <div class="profile-icon">
                <mat-icon [inline]="true">
                    account_circle
                </mat-icon>
            </div>
        </ng-template>
        <div class="friendship-details-container">
            <div style="margin-left: 15px;">
                <mat-card-title>{{titleString}} <span (click)="viewUserProfile(userFriend)"
                        class="friend-name">{{titleUserName}}</span></mat-card-title>
                <mat-card-subtitle>{{dateString}} {{formatDate(userFriend.createdAt)}}</mat-card-subtitle>
                <mat-card-subtitle
                    *ngIf="userFriend.areFriends==='accepted' && userFriend.updatedAt != null">Friends Since:
                    {{formatDate(userFriend.updatedAt)}}</mat-card-subtitle>
                <mat-card-subtitle>{{subtitleString}} {{subtitleUserName}}</mat-card-subtitle>
            </div>
        </div>
        <div class="mutual-container">
            <div fxFlex *ngFor="let mutualFriend of mutualFriends">
                <app-mutual-friend [mutualFriend]="mutualFriend"></app-mutual-friend>
            </div>
        </div>
    </mat-card-content>
    <mat-card-actions [hidden]="actionsDisplay === 'hide'">
        <div 
            [ngSwitch]="actionsDisplay">
            <div *ngSwitchCase="'sent'" class="friend-actions-container">
                <mat-button-toggle-group [value]="userFriend.areFriends">
                    <mat-button-toggle disabled value="accepted">Accepted</mat-button-toggle>
                    <mat-button-toggle disabled value="rejected">Rejected</mat-button-toggle>
                </mat-button-toggle-group>
                <div [hidden]="userFriend.areFriends !== 'pending'">
                    <mat-icon class="icon-style" matTooltip="Click to delete a friend request." color="warn"
                        (click)="deleteFriendRequest(userFriend)">
                        delete
                    </mat-icon>
                </div>
            </div>
            <div *ngSwitchCase="'received'" class="friend-actions-container">
                <mat-button-toggle-group [value]="userFriend.areFriends"
                    (change)="updateFriendStatus($event.value, userFriend)" matTooltip="Update Friend Request.">
                    <mat-button-toggle value="accepted">Accept</mat-button-toggle>
                    <mat-button-toggle value="rejected">Reject</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </div>
    </mat-card-actions>
</mat-card>