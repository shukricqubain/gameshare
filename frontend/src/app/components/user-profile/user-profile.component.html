<div class="child-component">
    <mat-tab-group (selectedIndexChange)="onSelectedIndexChange($event)" (selectedTabChange)="onSelectedTabChange($event)">
        <mat-tab label="Game Collection">
            <div class="form-column">
                <div class="search-form-container">
                    <form [formGroup]="gameSearchCriteria" style="margin-top: 25px;" (ngSubmit)="applyGameSearch()">
                        <mat-form-field>
                            <mat-label>Search</mat-label>
                            <input matInput formControlName="searchTerm" placeholder="Search Table" #input>
                        </mat-form-field>
                        <mat-icon style="margin-left: 10px;cursor: pointer; color: green;" (click)="applyGameSearch()">
                            search
                        </mat-icon>
                        <mat-icon style="margin-left: 10px;cursor: pointer;" color="warn" (click)="clearGameSearch()">
                            clear
                        </mat-icon>
                    </form>
                    <button mat-raised-button style="cursor: pointer; margin-top:25px;" color="primary" type="button" (click)="addUserGame()">Add Game</button>
                </div>
                <div>
                    <table mat-table [dataSource]="userGamesDataSource" class="table mat-elevation-z8"
                        matSortActive="userGameID" matSortDisableClear matSortDirection="asc" matSort #gameSort="matSort">

                        <!-- userGameID Column -->
                        <ng-container matColumnDef="userGameID">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> UserGameID </th>
                            <td mat-cell *matCellDef="let element"> {{element.userGameID}} </td>
                        </ng-container>

                        <!-- gameName Column -->
                        <ng-container matColumnDef="gameName">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> GameName </th>
                            <td mat-cell *matCellDef="let element"> {{getGameName(element.gameID)}} </td>
                        </ng-container>

                        <!-- gameEnjoymentRating Column -->
                        <ng-container matColumnDef="gameEnjoymentRating">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> GameEnjoymentRating </th>
                            <td mat-cell *matCellDef="let element"> {{element.gameEnjoymentRating}} </td>
                        </ng-container>

                        <!-- createdAt Column -->
                        <ng-container matColumnDef="createdAt">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Created At </th>
                            <td mat-cell *matCellDef="let element"> {{formatDate(element.createdAt)}} </td>
                        </ng-container>

                        <!-- updatedAt Column -->
                        <ng-container matColumnDef="updatedAt">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Updated At </th>
                            <td mat-cell *matCellDef="let element"> {{formatDate(element.updatedAt)}} </td>
                        </ng-container>

                        <!-- actions Column -->
                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let element">
                                <button mat-icon-button color="primary" (click)="editUserGame(element)">
                                    <mat-icon class="icon-class">
                                        edit
                                    </mat-icon>
                                </button>
                                <button mat-icon-button color="warn" (click)="deleteUserGame(element)">
                                    <mat-icon class="icon-class">
                                        delete
                                    </mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedUserGamesColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedUserGamesColumns;"></tr>

                        <!-- Row shown when there is no matching data. -->
                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="4">No data matching the filter "</td>
                        </tr>
                    </table>
                    <mat-paginator #gamePaginator [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20, 100]"
                        [showFirstLastButtons]="true" [length]="gameResultsLength">
                    </mat-paginator>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Achievement-collection">
            <div class="search-form-container">
                <form [formGroup]="achievementSearchCriteria" style="margin-top: 25px;" (ngSubmit)="applyAchievementSearch()">
                    <mat-form-field>
                        <mat-label>Search</mat-label>
                        <input matInput formControlName="achievementSearchTerm" placeholder="Search Table" #input>
                    </mat-form-field>
                    <mat-icon style="margin-left: 10px;cursor: pointer; color: green;" (click)="applyAchievementSearch()">
                        search
                    </mat-icon>
                    <mat-icon style="margin-left: 10px;cursor: pointer;" color="warn" (click)="applyAchievementSearch()">
                        clear
                    </mat-icon>
                </form>
                <button mat-raised-button style="cursor: pointer; margin-top:25px;" color="primary" type="button" (click)="addUserAchievement()">Add Achievement</button>
            </div>
            <div class="form-column">
                <div>
                    <table mat-table [dataSource]="userAchievementDataSource" class="table mat-elevation-z8"
                        matSortActive="userAchievementID" matSortDisableClear matSortDirection="asc" matSort #achievementSort="matSort">

                        <!-- userAchievementID Column -->
                        <ng-container matColumnDef="userAchievementID">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> UserAchievementID </th>
                            <td mat-cell *matCellDef="let element"> {{element.userAchievementID}} </td>
                        </ng-container>

                        <!-- achievementID Column -->
                        <ng-container matColumnDef="achievementID">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> AchievementID </th>
                            <td mat-cell *matCellDef="let element"> {{element.achievementID}} </td>
                        </ng-container>

                        <!-- achievementName -->
                        <ng-container matColumnDef="achievementName">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Achievement Name </th>
                            <td mat-cell *matCellDef="let element"> {{element.achievementName}} </td>
                        </ng-container>

                        <!-- gameID -->
                        <ng-container matColumnDef="gameID">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Game ID </th>
                            <td mat-cell *matCellDef="let element"> {{element.gameID}} </td>
                        </ng-container>

                        <!-- gameName Column -->
                        <ng-container matColumnDef="gameName">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> GameName </th>
                            <td mat-cell *matCellDef="let element"> {{element.gameName}} </td>
                        </ng-container>

                        <!-- userID Column -->
                        <ng-container matColumnDef="userID">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> User ID </th>
                            <td mat-cell *matCellDef="let element"> {{element.userID}} </td>
                        </ng-container>

                        <!-- ahcievementStatus -->
                        <ng-container matColumnDef="achievementStatus">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Achievement Status </th>
                            <td mat-cell *matCellDef="let element"> {{element.achievementStatus}} </td>
                        </ng-container>

                        <!-- createdAt Column -->
                        <ng-container matColumnDef="createdAt">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Created At </th>
                            <td mat-cell *matCellDef="let element"> {{formatDate(element.createdAt)}} </td>
                        </ng-container>

                        <!-- updatedAt Column -->
                        <ng-container matColumnDef="updatedAt">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Updated At </th>
                            <td mat-cell *matCellDef="let element"> {{formatDate(element.updatedAt)}} </td>
                        </ng-container>

                        <!-- actions Column -->
                        <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef>Actions</th>
                            <td mat-cell *matCellDef="let element">
                                <button mat-icon-button color="primary" (click)="editUserAchievement(element)">
                                    <mat-icon class="icon-class">
                                        edit
                                    </mat-icon>
                                </button>
                                <button mat-icon-button color="warn" (click)="deleteUserAchievement(element)">
                                    <mat-icon class="icon-class">
                                        delete
                                    </mat-icon>
                                </button>
                            </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedUserAchievementColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedUserAchievementColumns;"></tr>

                        <!-- Row shown when there is no matching data. -->
                        <tr class="mat-row" *matNoDataRow>
                            <td class="mat-cell" colspan="4">No data matching the filter "</td>
                        </tr>
                    </table>
                    <mat-paginator #achievementPaginator [pageSize]="achievementPageSize" [pageSizeOptions]="[5, 10, 20, 100]"
                        [showFirstLastButtons]="true" [length]="achievementResultsLength">
                    </mat-paginator>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="user-details">
            <div class="form-column">
                <div class="form-row">
                    <h1 style="text-align: center;">Edit Profile</h1>
                    <mat-slide-toggle style="margin-left: 1.23rem;margin-top:1.70rem;" [matTooltip]="enableMessage"
                        [(ngModel)]="editEnabled" (ngModelChange)="changeForm()">
                    </mat-slide-toggle>
                </div>
                <br>
                <form [formGroup]="userProfileForm" (ngSubmit)="onSubmit()">
                    <div class="form-column">
                        <div class="form-row">
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>Firstname</label>
                                <input matInput gameName="firstName" id="firstName" type="text"
                                    formControlName="firstName" placeholder="Enter firstname." required />
                            </mat-form-field>
                            <mat-form-field MatFormFieldAppearance="outline" style="margin-left:10px;">
                                <label>Lastname</label>
                                <input matInput gameName="lastName" id="lastName" type="text" formControlName="lastName"
                                    placeholder="Enter lastname." required />
                            </mat-form-field>
                        </div>
                        <div class="form-row">
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>Username</label>
                                <input matInput gameName="userName" id="userName" type="text" formControlName="userName"
                                    placeholder="Enter username." required />
                            </mat-form-field>
                            <mat-form-field MatFormFieldAppearance="outline" style="margin-left:10px;">
                                <label>Password</label>
                                <input matInput gameName="userPassword" id="userPassword"
                                    [type]=" showPassword ? 'text' : 'password' " formControlName="userPassword"
                                    placeholder="Enter password." required />
                            </mat-form-field>
                        </div>
                        <div class="form-row">
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>Email</label>
                                <input matInput gameName="email" id="email" type="text" formControlName="email"
                                    placeholder="Enter email." required />
                            </mat-form-field>
                            <mat-form-field MatFormFieldAppearance="outline" style="margin-left:10px;">
                                <label>Phone Number</label>
                                <input matInput gameName="phoneNumber" id="phoneNumber" type="text"
                                    formControlName="phoneNumber" placeholder="Enter phone number." required />
                            </mat-form-field>
                        </div>
                        <div class="form-row">
                            <input [matDatepicker]="picker" placeholder="Choose a date" required
                                formControlName="dateOfBirth" />
                            <mat-datepicker-toggle [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>User Role</label>
                                <input matInput gameName="userRole" id="userRole" type="text" formControlName="userRole"
                                    placeholder="Enter user role." required />
                            </mat-form-field>
                        </div>
                    </div>
                    <br>
                    <div class="form-row">
                        <button mat-raised-button [disabled]="!userProfileForm.dirty || !userProfileForm.valid"
                            type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>