<div class="child-component">
    <mat-tab-group (selectedIndexChange)="onSelectedIndexChange($event)" (selectedTabChange)="onSelectedTabChange($event)">
        <mat-tab label="Thread Collection">
            <div class="form-column">
                <div class="search-form-container">
                    <form [formGroup]="threadSearchCriteria" style="margin-top: 25px;" (ngSubmit)="applyThreadSearch()">
                        <mat-form-field>
                            <mat-label>Search</mat-label>
                            <input matInput formControlName="threadSearchTerm" placeholder="Search Table" #input>
                        </mat-form-field>
                        <mat-icon style="margin-left: 10px;cursor: pointer; color: green;" (click)="applyThreadSearch()">
                            search
                        </mat-icon>
                        <mat-icon style="margin-left: 10px;cursor: pointer;" color="warn" (click)="clearThreadSearch()">
                            clear
                        </mat-icon>
                    </form>
                    <button mat-raised-button style="cursor: pointer; margin-top:25px;" color="primary" type="button" (click)="addUserThread()">Follow Thread</button>
                </div>
                <div *ngIf="!userThreadsLoaded" class="loading-container">
                    <mat-spinner [diameter]="100"></mat-spinner>
                </div>
                <div *ngIf="userThreadsLoaded" class="thread-container">
                    <div fxFlex *ngFor="let thread of userThreads" class="thread-item">
                        <mat-card>
                          <mat-card-header>
                            <mat-card-title>{{thread.threadName}}</mat-card-title>
                          </mat-card-header>
                          <mat-card-actions>
                            <div class="card-actions-container">
                                <button mat-button (click)="unfollowThread(thread)">Unfollow</button>
                                <button (click)="openThread(thread)" mat-button>Open</button>
                            </div>
                          </mat-card-actions>
                        </mat-card>
                      </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Board Collection">
            <div class="form-column">
                <div class="search-form-container">
                    <form [formGroup]="boardSearchCriteria" style="margin-top: 25px;" (ngSubmit)="applyBoardSearch()">
                        <mat-form-field>
                            <mat-label>Search</mat-label>
                            <input matInput formControlName="boardSearchTerm" placeholder="Search Table" #input>
                        </mat-form-field>
                        <mat-icon style="margin-left: 10px;cursor: pointer; color: green;" (click)="applyBoardSearch()">
                            search
                        </mat-icon>
                        <mat-icon style="margin-left: 10px;cursor: pointer;" color="warn" (click)="clearBoardSearch()">
                            clear
                        </mat-icon>
                    </form>
                    <button mat-raised-button style="cursor: pointer; margin-top:25px;" color="primary" type="button" (click)="addUserBoard()">Follow Board</button>
                </div>
                <div *ngIf="!userBoardsLoaded" class="loading-container">
                    <mat-spinner [diameter]="100"></mat-spinner>
                </div>
                <div *ngIf="userBoardsLoaded" class="board-container">
                    <div fxFlex *ngFor="let board of userBoards" class="board-item">
                        <mat-card>
                          <mat-card-header>
                            <mat-card-title>{{board.boardName}}</mat-card-title>
                            <mat-card-subtitle class="open-board">This board discusses the game {{board.gameName}}.</mat-card-subtitle>
                          </mat-card-header>
                          <mat-card-actions>
                            <div class="card-actions-container">
                                <button mat-button (click)="unfollowBoard(board)" type="button">Unfollow</button>
                                <button mat-button (click)="openBoard(board)" type="button">Open</button>
                            </div>
                          </mat-card-actions>
                        </mat-card>
                      </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Game Collection">
            <div class="game-column">
                <div class="search-form-container">
                    <form [formGroup]="userGameSearchCriteria" style="margin-top: 25px;" (ngSubmit)="applyUserGameSearch()">
                        <mat-form-field>
                            <mat-label>Search</mat-label>
                            <input matInput formControlName="searchTerm" placeholder="Search Table" #input>
                        </mat-form-field>
                        <mat-icon style="margin-left: 10px;cursor: pointer; color: green;" (click)="applyUserGameSearch()">
                            search
                        </mat-icon>
                        <mat-icon style="margin-left: 10px;cursor: pointer;" color="warn" (click)="clearGameSearch()">
                            clear
                        </mat-icon>
                    </form>
                    <button mat-raised-button style="cursor: pointer; margin-top:25px;" color="primary" type="button" (click)="addUserGame()">Add Game</button>
                </div>
                <div *ngIf="!userGamesLoaded" class="loading-container">
                    <mat-spinner [diameter]="100"></mat-spinner>
                </div>
                <div *ngIf="userGamesLoaded" class="game-container">
                    <div fxFlex *ngFor="let userGame of userGames" class="game-margin">
                        <mat-card class="game-item">
                            <mat-card-content>
                                <img src="{{userGame.game.gameCover}}" class="game-image">
                            </mat-card-content>
                            <mat-card-actions class="actions-style">
                                <mat-icon class="icon-style" matTooltip="Click to read information about a game." color="primary" (click)="gameInfoPopup(userGame.game)">
                                    info
                                </mat-icon>
                                <mat-icon class="icon-style" matTooltip="Click to edit a game." style="color: green;" (click)="editUserGame(userGame)">
                                    edit
                                </mat-icon>
                                <mat-icon class="icon-style" matTooltip="Click to delete a game." color="warn" (click)="deleteUserGame(userGame)">
                                    delete
                                </mat-icon>
                            </mat-card-actions>
                        </mat-card>
                    </div>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Achievement-collection">
            <div class="search-form-container">
                <form [formGroup]="userAchievementSearchCriteria" style="margin-top: 25px;" (ngSubmit)="applyAchievementSearch()">
                    <mat-form-field>
                        <mat-label>Search</mat-label>
                        <input matInput formControlName="achievementSearchTerm" placeholder="Search Table" #input>
                    </mat-form-field>
                    <mat-icon style="margin-left: 10px;cursor: pointer; color: green;" (click)="applyAchievementSearch()">
                        search
                    </mat-icon>
                    <mat-icon style="margin-left: 10px;cursor: pointer;" color="warn" (click)="clearAchievementSearch()">
                        clear
                    </mat-icon>
                </form>
                <button mat-raised-button style="cursor: pointer; margin-top:25px;" color="primary" type="button" (click)="addUserAchievement()">Add Achievement</button>
            </div>
            <div *ngIf="!achievementsLoaded" class="loading-container">
                <mat-spinner [diameter]="100"></mat-spinner>
            </div>
            <div *ngIf="achievementsLoaded" class="achievement-container">
                <div fxFlex *ngFor="let achievement of userAchievements" class="achievement-margin">
                    <mat-card class="achievement-item">
                        <mat-card-content class="achievement-content">
                            <img src="{{achievement.achievementIcon}}">
                            <div style="margin-left: 15px;">
                                <mat-card-title>{{achievement.achievementName}}</mat-card-title>
                                <mat-card-subtitle>{{achievement.achievementDescription}}</mat-card-subtitle>
                            </div>
                        </mat-card-content>
                        <mat-card-actions class="actions-style">
                            <mat-icon class="icon-style" matTooltip="Click to edit an achievement." style="color: green;"
                                (click)="editUserAchievement(achievement)">
                                edit
                            </mat-icon>
                            <mat-icon class="icon-style" matTooltip="Click to delete an achievement." color="warn"
                                (click)="deleteUserAchievement(achievement)">
                                delete
                            </mat-icon>
                        </mat-card-actions>
                    </mat-card>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="user-details">
            <div class="form-column">
                <div class="form-row">
                    <h1 style="text-align: center;">Edit Profile</h1>
                    <mat-slide-toggle style="margin-left: 1.23rem;margin-top:1.70rem;" [matTooltip]="enableMessage"
                        [(ngModel)]="editEnabled" (ngModelChange)="changeForm()">
                    </mat-slide-toggle>
                </div>
                <br>
                <form [formGroup]="userProfileForm" (ngSubmit)="onSubmit()">
                    <div class="form-column">
                        <div class="form-row">
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>Firstname</label>
                                <input matInput gameName="firstName" id="firstName" type="text"
                                    formControlName="firstName" placeholder="Enter firstname." required />
                            </mat-form-field>
                            <mat-form-field MatFormFieldAppearance="outline" style="margin-left:10px;">
                                <label>Lastname</label>
                                <input matInput gameName="lastName" id="lastName" type="text" formControlName="lastName"
                                    placeholder="Enter lastname." required />
                            </mat-form-field>
                        </div>
                        <div class="form-row">
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>Username</label>
                                <input matInput gameName="userName" id="userName" type="text" formControlName="userName"
                                    placeholder="Enter username." required />
                            </mat-form-field>
                            <mat-form-field MatFormFieldAppearance="outline" style="margin-left:10px;">
                                <label>Password</label>
                                <input matInput gameName="userPassword" id="userPassword"
                                    [type]=" showPassword ? 'text' : 'password' " formControlName="userPassword"
                                    placeholder="Enter password." required />
                            </mat-form-field>
                        </div>
                        <div class="form-row">
                            <mat-form-field MatFormFieldAppearance="outline">
                                <label>Email</label>
                                <input matInput gameName="email" id="email" type="text" formControlName="email"
                                    placeholder="Enter email." required [pattern]="emailValidation" />
                            </mat-form-field>
                            <mat-form-field MatFormFieldAppearance="outline" style="margin-left:10px;">
                                <label>Phone Number</label>
                                <input matInput gameName="phoneNumber" id="phoneNumber" type="text" mask="(000)-000-0000"
                                    formControlName="phoneNumber" placeholder="Enter phone number." required />
                            </mat-form-field>
                        </div>
                        <div class="form-row">
                            <input [matDatepicker]="picker" placeholder="Choose a date" [max]="minDate" required
                                formControlName="dateOfBirth" />
                            <mat-datepicker-toggle [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </div>
                    </div>
                    <br>
                    <div class="form-row">
                        <button mat-raised-button [disabled]="!userProfileForm.dirty || !userProfileForm.valid"
                            type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>